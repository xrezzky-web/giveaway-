<!DOCTYPE html><html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>XREZZKYSTORE RNG Giveaway</title>
<style>
:root{
  --bg:#0b0f14;
  --card:#0f1620;
  --accent:#00ffe1;
}
*{box-sizing:border-box;font-family:Arial,Helvetica,sans-serif}
body{
  margin:0;min-height:100vh;display:flex;justify-content:center;align-items:center;
  background:radial-gradient(circle at top,#1b2a2f,#05070a 70%);
  color:#fff;
}
.card{
  width:360px;background:var(--card);border-radius:16px;padding:16px;
  box-shadow:0 0 25px rgba(0,255,225,.25);
}
.title{text-align:center;font-weight:bold;color:var(--accent)}
.subtitle{text-align:center;font-size:12px;opacity:.8;margin-bottom:10px}
input,button{
  width:100%;padding:10px;border-radius:10px;border:none;outline:none;
}
input{margin-bottom:8px;background:#111b26;color:#fff}
button{
  background:#0fa;cursor:pointer;font-weight:bold;margin-bottom:10px
}
button:disabled{opacity:.5;cursor:not-allowed}
.wheel-wrap{position:relative;width:260px;height:260px;margin:10px auto}
.pointer{
  position:absolute;top:-6px;left:50%;transform:translateX(-50%);
  width:0;height:0;border-left:12px solid transparent;border-right:12px solid transparent;
  border-bottom:22px solid #fff;z-index:3
}
canvas{border-radius:50%;background:#000}
.result{text-align:center;margin-top:6px;font-size:14px}
.log{
  margin-top:8px;background:#0a121a;padding:8px;border-radius:10px;
  max-height:120px;overflow:auto;font-size:12px
}
.admin-panel{display:none;margin-top:10px;border-top:1px solid #233;padding-top:8px}
.admin-panel textarea{width:100%;height:80px;background:#111b26;color:#fff;border-radius:8px}
</style>
</head>
<body>
<div class="card">
  <div class="title">XREZZKYSTORE</div>
  <div class="subtitle">RNG GIVEAWAY SYSTEM</div>  <input id="username" placeholder="Masukkan nama (1x saja)" />
  <input id="code" placeholder="Kode tambahan (opsional)" />
  <button id="spinBtn">ðŸŽ° SPIN RNG</button>  <div class="wheel-wrap">
    <div class="pointer"></div>
    <canvas id="wheel" width="260" height="260"></canvas>
  </div>  <div class="result" id="result">Siap diundiâ€¦</div>
  <div class="log" id="log"></div>  <div class="admin-panel" id="adminPanel">
    <b>ADMIN PANEL</b>
    <small>(edit hadiah di sini)</small>
    <textarea id="adminPrizes"></textarea>
    <button onclick="savePrizes()">Simpan Hadiah</button>
  </div>
</div><script>
// ===== DATA =====
let prizes = JSON.parse(localStorage.getItem('prizes')) || [
  'Saldo DANA 10K','Voucher FF','ZONK','Saldo DANA 5K','Diamond FF','ZONK'
];

// kode: jumlah spin tambahan
let codes = {
  'XREZZKY2':2,
  'XREZZKY5':5
};

let spinsData = JSON.parse(localStorage.getItem('spinsData')) || {};

// ===== CANVAS =====
const canvas = document.getElementById('wheel');
const ctx = canvas.getContext('2d');
const radius = canvas.width/2;
let angle = 0;
let spinning = false;

function drawWheel(){
  const slice = 2*Math.PI/prizes.length;
  ctx.clearRect(0,0,canvas.width,canvas.height);
  prizes.forEach((p,i)=>{
    ctx.beginPath();
    ctx.moveTo(radius,radius);
    ctx.arc(radius,radius,radius,i*slice+angle,(i+1)*slice+angle);
    ctx.fillStyle = `hsl(${i*360/prizes.length},80%,55%)`;
    ctx.fill();
    ctx.save();
    ctx.translate(radius,radius);
    ctx.rotate(i*slice+slice/2+angle);
    ctx.fillStyle='#000';
    ctx.font='bold 12px Arial';
    ctx.textAlign='right';
    ctx.fillText(p, radius-10,4);
    ctx.restore();
  });
}

drawWheel();

// ===== SPIN LOGIC =====
document.getElementById('spinBtn').onclick=()=>{
  const user=document.getElementById('username').value.trim();
  if(!user) return alert('Isi nama dulu');

  if(!spinsData[user]) spinsData[user]={used:0,extra:0};

  // cek code
  const code=document.getElementById('code').value.trim();
  if(code && codes[code]){
    spinsData[user].extra+=codes[code];
    delete codes[code];
    document.getElementById('code').value='';
  }

  if(spinsData[user].used >= 1 + spinsData[user].extra){
    return alert('Kesempatan spin habis');
  }

  spinsData[user].used++;
  localStorage.setItem('spinsData',JSON.stringify(spinsData));
  spin(user);
};

function spin(user){
  if(spinning) return;
  spinning=true;
  let speed=Math.random()*0.3+0.25;
  let decel=0.995;
  function anim(){
    angle+=speed;
    speed*=decel;
    drawWheel();
    if(speed>0.002){
      requestAnimationFrame(anim);
    }else{
      spinning=false;
      finish(user);
    }
  }
  anim();
}

function finish(user){
  const slice=2*Math.PI/prizes.length;
  const index = Math.floor((prizes.length - (angle%(2*Math.PI))/(slice))%prizes.length);
  const prize=prizes[index];
  document.getElementById('result').innerText=`ðŸŽ‰ ${user} mendapatkan: ${prize}`;
  const log=document.getElementById('log');
  log.innerHTML = `MENANG - ${user} (${prize})<br>` + log.innerHTML;
}

// ===== ADMIN =====
// buka admin panel: ketik nama = admin
const usernameInput=document.getElementById('username');
usernameInput.addEventListener('change',()=>{
  if(usernameInput.value==='admin'){
    document.getElementById('adminPanel').style.display='block';
    document.getElementById('adminPrizes').value=prizes.join('\n');
  }
});

function savePrizes(){
  prizes=document.getElementById('adminPrizes').value.split('\n').filter(Boolean);
  localStorage.setItem('prizes',JSON.stringify(prizes));
  drawWheel();
  alert('Hadiah disimpan');
}
</script></body>
</html>
